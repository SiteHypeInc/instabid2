<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>InstaBid - Contractor Dashboard</title>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: #f5f5f5;
  padding: 20px;
}

.container {
  max-width: 1600px;
  margin: 0 auto;
  background: white;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.1);
}

.header {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 30px;
  border-radius: 12px 12px 0 0;
}

.header h1 {
  font-size: 2em;
  margin-bottom: 5px;
}

.header p {
  opacity: 0.9;
  font-size: 1.1em;
}

.main-tabs {
  display: flex;
  background: #2c3e50;
  padding: 0 20px;
}

.main-tab {
  padding: 18px 30px;
  cursor: pointer;
  border: none;
  background: none;
  font-size: 1.1em;
  font-weight: 600;
  color: #ecf0f1;
  border-bottom: 4px solid transparent;
  transition: all 0.3s;
}

.main-tab:hover {
  background: rgba(255,255,255,0.1);
}

.main-tab.active {
  background: white;
  color: #667eea;
  border-bottom-color: #667eea;
}

.sub-tabs {
  display: flex;
  background: #f8f9fa;
  border-bottom: 2px solid #ddd;
  padding: 0 20px;
  flex-wrap: wrap;
}

.sub-tab {
  padding: 12px 20px;
  cursor: pointer;
  border: none;
  background: none;
  font-size: 0.95em;
  font-weight: 600;
  color: #666;
  border-bottom: 3px solid transparent;
  transition: all 0.3s;
}

.sub-tab:hover {
  color: #667eea;
}

.sub-tab.active {
  color: #667eea;
  border-bottom-color: #667eea;
}

.content {
  padding: 30px;
  min-height: 500px;
}

.main-content {
  display: none;
}

.main-content.active {
  display: block;
}

.sub-content {
  display: none;
}

.sub-content.active {
  display: block;
}

.section-title {
  font-size: 1.5em;
  color: #333;
  margin-bottom: 20px;
  padding-bottom: 10px;
  border-bottom: 2px solid #667eea;
}

.config-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: 20px;
  margin-bottom: 30px;
}

.config-card {
  background: #f8f9fa;
  padding: 20px;
  border-radius: 8px;
  border: 2px solid #ddd;
}

.config-card h3 {
  font-size: 1.2em;
  color: #667eea;
  margin-bottom: 15px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.config-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 0;
  border-bottom: 1px solid #ddd;
}

.config-item:last-child {
  border-bottom: none;
}

.config-item label {
  font-weight: 600;
  color: #333;
  flex: 1;
}

.config-item input {
  width: 140px;
  padding: 8px 12px;
  border: 2px solid #ddd;
  border-radius: 6px;
  font-size: 1em;
  text-align: right;
}

.config-item input:focus {
  outline: none;
  border-color: #667eea;
}

.btn-save {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border: none;
  padding: 14px 35px;
  font-size: 1.1em;
  font-weight: 600;
  border-radius: 6px;
  cursor: pointer;
  margin-top: 20px;
}

.btn-save:hover {
  opacity: 0.9;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
}

.btn-cancel {
  background: #dc3545;
  color: white;
  border: none;
  padding: 14px 35px;
  font-size: 1.1em;
  font-weight: 600;
  border-radius: 6px;
  cursor: pointer;
  margin-top: 20px;
}

.btn-cancel:hover {
  opacity: 0.9;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(220, 53, 69, 0.4);
}

.status-message {
  padding: 15px;
  border-radius: 6px;
  margin-top: 20px;
  display: none;
}

.status-message.success {
  background: #d4edda;
  color: #155724;
  border: 1px solid #c3e6cb;
}

.status-message.error {
  background: #f8d7da;
  color: #721c24;
  border: 1px solid #f5c6cb;
}

.info-box {
  background: #e7f3ff;
  border-left: 4px solid #2196F3;
  padding: 15px;
  margin-bottom: 20px;
  border-radius: 4px;
}

.info-box p {
  color: #0d47a1;
  margin: 5px 0;
}

.placeholder-content {
  text-align: center;
  padding: 60px 20px;
  color: #999;
}

.placeholder-content h2 {
  font-size: 2em;
  margin-bottom: 10px;
}
</style>
</head>
<body>

<div class="container">
  <div class="header">
    <h1>âš™ï¸ InstaBid Contractor Dashboard</h1>
    <p>Manage pricing, regional adjustments, company profile, and contracts</p>
  </div>

  <div class="main-tabs">
    <button class="main-tab active" data-main="price-adjustments">ğŸ’° Price Adjustments</button>
    <button class="main-tab" data-main="estimate-tracker">ğŸ“Š Estimate Tracker</button>
    <button class="main-tab" data-main="company-profile">ğŸ¢ Company Profile</button>
    <button class="main-tab" data-main="contracts">ğŸ“„ Contract Templates</button>
  </div>

  <div class="content">
    
    <div class="main-content active" id="price-adjustments">
      
  <div class="sub-tabs">
    <button class="sub-tab active" data-sub="roofing">ğŸ  Roofing</button>
    <button class="sub-tab" data-sub="hvac">â„ï¸ HVAC</button>
    <button class="sub-tab" data-sub="electrical">âš¡ Electrical</button>
    <button class="sub-tab" data-sub="plumbing">ğŸš° Plumbing</button>
    <button class="sub-tab" data-sub="flooring">ğŸ“ Flooring</button>
    <button class="sub-tab" data-sub="painting">ğŸ¨ Painting</button>
    <button class="sub-tab" data-sub="drywall">ğŸ§± Drywall</button>
    <button class="sub-tab" data-sub="siding">ğŸ˜ï¸ Siding</button>
    <button class="sub-tab" data-sub="regional">ğŸ—ºï¸ Regional</button>
  </div>

      <div class="sub-content active" id="roofing">
        <h2 class="section-title">Roofing Configuration</h2>
        
        <div class="config-grid">
          <div class="config-card">
            <h3>ğŸ”º Pitch Multipliers</h3>
            <div class="config-item">
              <label>3/12 - 4/12 (Low):</label>
              <input type="number" step="0.05" id="pitch_low" value="1.0">
            </div>
            <div class="config-item">
              <label>5/12 - 6/12 (Medium):</label>
              <input type="number" step="0.05" id="pitch_med" value="1.2">
            </div>
            <div class="config-item">
              <label>7/12 - 9/12 (High):</label>
              <input type="number" step="0.05" id="pitch_high" value="1.4">
            </div>
            <div class="config-item">
              <label>10/12+ (Steep):</label>
              <input type="number" step="0.05" id="pitch_steep" value="1.8">
            </div>
          </div>

          <div class="config-card">
            <h3>ğŸ¢ Story Multipliers</h3>
            <div class="config-item">
              <label>1 Story:</label>
              <input type="number" step="0.05" id="story_1" value="1.0">
            </div>
            <div class="config-item">
              <label>2 Story:</label>
              <input type="number" step="0.05" id="story_2" value="1.3">
            </div>
            <div class="config-item">
              <label>3+ Story:</label>
              <input type="number" step="0.05" id="story_3" value="1.6">
            </div>
          </div>

          <div class="config-card">
            <h3>ğŸ“¦ Material Costs (per sqft)</h3>
            <div class="config-item">
              <label>Asphalt Shingles:</label>
              <input type="number" step="0.1" id="mat_asphalt" value="2.5">
            </div>
            <div class="config-item">
              <label>Architectural:</label>
              <input type="number" step="0.1" id="mat_arch" value="3.5">
            </div>
            <div class="config-item">
              <label>Metal:</label>
              <input type="number" step="0.1" id="mat_metal" value="5.0">
            </div>
            <div class="config-item">
              <label>Tile:</label>
              <input type="number" step="0.1" id="mat_tile" value="7.0">
            </div>
            <div class="config-item">
              <label>Slate:</label>
              <input type="number" step="0.1" id="mat_slate" value="12.0">
            </div>
          </div>

          <div class="config-card">
            <h3>ğŸ’µ Fixed Costs</h3>
            <div class="config-item">
              <label>Tear-Off (per layer):</label>
              <input type="number" step="50" id="tearoff_cost" value="1500">
            </div>
            <div class="config-item">
              <label>Plywood (per sqft):</label>
              <input type="number" step="0.5" id="plywood_cost" value="4.5">
            </div>
            <div class="config-item">
              <label>Chimney Flashing:</label>
              <input type="number" step="50" id="chimney_cost" value="400">
            </div>
            <div class="config-item">
              <label>Valley (per linear ft):</label>
              <input type="number" step="1" id="valley_cost" value="8">
            </div>
            <div class="config-item">
              <label>Skylight:</label>
              <input type="number" step="50" id="skylight_cost" value="300">
            </div>
            <div class="config-item">
              <label>Ridge Vent (per ft):</label>
              <input type="number" step="1" id="ridge_cost" value="10">
            </div>
          </div>
        </div>

        <button class="btn-save" onclick="saveConfig('roofing')">ğŸ’¾ Save Roofing Config</button>
        <div class="status-message" id="roofing-status"></div>
      </div>

      <div class="sub-content" id="hvac">
        <h2 class="section-title">HVAC Configuration</h2>
        
        <div class="config-grid">
          <div class="config-card">
            <h3>ğŸ  Home Size Multipliers</h3>
            <div class="config-item">
              <label>< 1500 sqft:</label>
              <input type="number" step="0.05" id="hvac_size_small" value="0.9">
            </div>
            <div class="config-item">
              <label>1500-2500 sqft:</label>
              <input type="number" step="0.05" id="hvac_size_med" value="1.0">
            </div>
            <div class="config-item">
              <label>2500-4000 sqft:</label>
              <input type="number" step="0.05" id="hvac_size_large" value="1.2">
            </div>
            <div class="config-item">
              <label>> 4000 sqft:</label>
              <input type="number" step="0.05" id="hvac_size_xlarge" value="1.4">
            </div>
          </div>

          <div class="config-card">
            <h3>â„ï¸ Unit Costs (Base)</h3>
            <div class="config-item">
              <label>Furnace (Gas):</label>
              <input type="number" step="100" id="hvac_furnace" value="3500">
            </div>
            <div class="config-item">
              <label>AC Unit (Central):</label>
              <input type="number" step="100" id="hvac_ac" value="4000">
            </div>
            <div class="config-item">
              <label>Heat Pump:</label>
              <input type="number" step="100" id="hvac_heatpump" value="5500">
            </div>
            <div class="config-item">
              <label>Mini-Split (per head):</label>
              <input type="number" step="100" id="hvac_minisplit" value="2500">
            </div>
          </div>

          <div class="config-card">
            <h3>âš™ï¸ Additional Costs</h3>
            <div class="config-item">
              <label>Ductwork (per ft):</label>
              <input type="number" step="1" id="hvac_duct" value="15">
            </div>
            <div class="config-item">
              <label>Thermostat (Smart):</label>
              <input type="number" step="10" id="hvac_thermostat" value="350">
            </div>
            <div class="config-item">
              <label>Air Handler:</label>
              <input type="number" step="100" id="hvac_handler" value="1200">
            </div>
          </div>

          <div class="config-card">
            <h3>ğŸ”§ Complexity Multipliers</h3>
            <div class="config-item">
              <label>Standard Install:</label>
              <input type="number" step="0.05" id="hvac_standard" value="1.0">
            </div>
            <div class="config-item">
              <label>Moderate (2 story):</label>
              <input type="number" step="0.05" id="hvac_moderate" value="1.2">
            </div>
            <div class="config-item">
              <label>Complex (3+, tight):</label>
              <input type="number" step="0.05" id="hvac_complex" value="1.5">
            </div>
          </div>
        </div>

        <button class="btn-save" onclick="saveConfig('hvac')">ğŸ’¾ Save HVAC Config</button>
        <div class="status-message" id="hvac-status"></div>
      </div>

      <div class="sub-content" id="electrical">
        <h2 class="section-title">Electrical Configuration</h2>
        
        <div class="config-grid">
          <div class="config-card">
            <h3>ğŸ”Œ Panel & Service</h3>
            <div class="config-item">
              <label>100A Panel Upgrade:</label>
              <input type="number" step="100" id="elec_panel_100" value="1800">
            </div>
            <div class="config-item">
              <label>200A Panel Upgrade:</label>
              <input type="number" step="100" id="elec_panel_200" value="2500">
            </div>
            <div class="config-item">
              <label>Sub-Panel Install:</label>
              <input type="number" step="100" id="elec_subpanel" value="1200">
            </div>
          </div>

          <div class="config-card">
            <h3>ğŸ’¡ Fixtures & Devices</h3>
            <div class="config-item">
              <label>Outlet Install:</label>
              <input type="number" step="10" id="elec_outlet" value="125">
            </div>
            <div class="config-item">
              <label>Switch Install:</label>
              <input type="number" step="10" id="elec_switch" value="110">
            </div>
            <div class="config-item">
              <label>Light Fixture:</label>
              <input type="number" step="10" id="elec_fixture" value="150">
            </div>
            <div class="config-item">
              <label>Ceiling Fan:</label>
              <input type="number" step="10" id="elec_fan" value="200">
            </div>
            <div class="config-item">
              <label>GFCI Outlet:</label>
              <input type="number" step="10" id="elec_gfci" value="175">
            </div>
          </div>

          <div class="config-card">
            <h3>âš¡ Specialty Work</h3>
            <div class="config-item">
              <label>EV Charger (240V):</label>
              <input type="number" step="100" id="elec_ev" value="1200">
            </div>
            <div class="config-item">
              <label>Generator Hook-up:</label>
              <input type="number" step="100" id="elec_generator" value="1500">
            </div>
            <div class="config-item">
              <label>Hot Tub Circuit:</label>
              <input type="number" step="100" id="elec_hottub" value="800">
            </div>
          </div>

          <div class="config-card">
            <h3>ğŸ—ï¸ Labor Rates (per hour)</h3>
            <div class="config-item">
              <label>Standard Work:</label>
              <input type="number" step="5" id="elec_labor_std" value="85">
            </div>
            <div class="config-item">
              <label>Complex/Rework:</label>
              <input type="number" step="5" id="elec_labor_complex" value="110">
            </div>
          </div>
        </div>

        <button class="btn-save" onclick="saveConfig('electrical')">ğŸ’¾ Save Electrical Config</button>
        <div class="status-message" id="electrical-status"></div>
      </div>

      <div class="sub-content" id="plumbing">
        <h2 class="section-title">Plumbing Configuration</h2>
        
        <div class="config-grid">
          <div class="config-card">
            <h3>ğŸš° Fixtures</h3>
            <div class="config-item">
              <label>Toilet Install:</label>
              <input type="number" step="50" id="plumb_toilet" value="350">
            </div>
            <div class="config-item">
              <label>Sink/Faucet Install:</label>
              <input type="number" step="50" id="plumb_sink" value="400">
            </div>
            <div class="config-item">
              <label>Shower Install:</label>
              <input type="number" step="100" id="plumb_shower" value="1200">
            </div>
            <div class="config-item">
              <label>Bathtub Install:</label>
              <input type="number" step="100" id="plumb_tub" value="1500">
            </div>
            <div class="config-item">
              <label>Dishwasher Hook-up:</label>
              <input type="number" step="50" id="plumb_dishwasher" value="300">
            </div>
          </div>

          <div class="config-card">
            <h3>ğŸ”§ Water Systems</h3>
            <div class="config-item">
              <label>Water Heater (Tank):</label>
              <input type="number" step="100" id="plumb_heater_tank" value="1800">
            </div>
            <div class="config-item">
              <label>Water Heater (Tankless):</label>
              <input type="number" step="100" id="plumb_heater_tankless" value="3200">
            </div>
            <div class="config-item">
              <label>Sump Pump:</label>
              <input type="number" step="50" id="plumb_sump" value="850">
            </div>
            <div class="config-item">
              <label>Water Softener:</label>
              <input type="number" step="100" id="plumb_softener" value="1400">
            </div>
          </div>

          <div class="config-card">
            <h3>ğŸš¿ Pipes & Drains</h3>
            <div class="config-item">
              <label>Pipe Repair (per ft):</label>
              <input type="number" step="5" id="plumb_pipe_repair" value="45">
            </div>
            <div class="config-item">
              <label>Pipe Replace (per ft):</label>
              <input type="number" step="5" id="plumb_pipe_replace" value="75">
            </div>
            <div class="config-item">
              <label>Drain Clearing:</label>
              <input type="number" step="25" id="plumb_drain" value="250">
            </div>
            <div class="config-item">
              <label>Sewer Line (per ft):</label>
              <input type="number" step="10" id="plumb_sewer" value="125">
            </div>
          </div>

          <div class="config-card">
            <h3>âš™ï¸ Labor Rates (per hour)</h3>
            <div class="config-item">
              <label>Standard Work:</label>
              <input type="number" step="5" id="plumb_labor_std" value="95">
            </div>
            <div class="config-item">
              <label>Emergency/Complex:</label>
              <input type="number" step="5" id="plumb_labor_emerg" value="140">
            </div>
          </div>
        </div>

        <button class="btn-save" onclick="saveConfig('plumbing')">ğŸ’¾ Save Plumbing Config</button>
        <div class="status-message" id="plumbing-status"></div>
      </div>

      <div class="sub-content" id="flooring">
        <h2 class="section-title">Flooring Configuration</h2>
        
        <div class="config-grid">
          <div class="config-card">
            <h3>ğŸ“ Material Costs (per sqft)</h3>
            <div class="config-item">
              <label>Carpet (Standard):</label>
              <input type="number" step="0.5" id="floor_carpet" value="3.5">
            </div>
            <div class="config-item">
              <label>Vinyl Plank:</label>
              <input type="number" step="0.5" id="floor_vinyl" value="4.0">
            </div>
            <div class="config-item">
              <label>Laminate:</label>
              <input type="number" step="0.5" id="floor_laminate" value="4.5">
            </div>
            <div class="config-item">
              <label>Hardwood (Engineered):</label>
              <input type="number" step="0.5" id="floor_hardwood_eng" value="8.0">
            </div>
            <div class="config-item">
              <label>Hardwood (Solid):</label>
              <input type="number" step="0.5" id="floor_hardwood_solid" value="12.0">
            </div>
            <div class="config-item">
              <label>Tile (Ceramic):</label>
              <input type="number" step="0.5" id="floor_tile_ceramic" value="6.0">
            </div>
            <div class="config-item">
              <label>Tile (Porcelain):</label>
              <input type="number" step="0.5" id="floor_tile_porcelain" value="8.5">
            </div>
          </div>

          <div class="config-card">
            <h3>ğŸ”¨ Installation Labor (per sqft)</h3>
            <div class="config-item">
              <label>Carpet:</label>
              <input type="number" step="0.25" id="floor_labor_carpet" value="1.5">
            </div>
            <div class="config-item">
              <label>Vinyl/Laminate:</label>
              <input type="number" step="0.25" id="floor_labor_vinyl" value="2.0">
            </div>
            <div class="config-item">
              <label>Hardwood:</label>
              <input type="number" step="0.25" id="floor_labor_hardwood" value="4.0">
            </div>
            <div class="config-item">
              <label>Tile:</label>
              <input type="number" step="0.25" id="floor_labor_tile" value="5.0">
            </div>
          </div>

          <div class="config-card">
            <h3>ğŸ§° Prep & Extras</h3>
            <div class="config-item">
              <label>Subfloor Repair (per sqft):</label>
              <input type="number" step="0.25" id="floor_subfloor" value="3.0">
            </div>
            <div class="config-item">
              <label>Removal (per sqft):</label>
              <input type="number" step="0.25" id="floor_removal" value="1.5">
            </div>
            <div class="config-item">
              <label>Underlayment (per sqft):</label>
              <input type="number" step="0.1" id="floor_underlay" value="0.75">
            </div>
            <div class="config-item">
              <label>Baseboard (per linear ft):</label>
              <input type="number" step="0.5" id="floor_baseboard" value="4.0">
            </div>
          </div>

          <div class="config-card">
            <h3>âš™ï¸ Complexity Multipliers</h3>
            <div class="config-item">
              <label>Standard Room:</label>
              <input type="number" step="0.05" id="floor_standard" value="1.0">
            </div>
            <div class="config-item">
              <label>Moderate (stairs/angles):</label>
              <input type="number" step="0.05" id="floor_moderate" value="1.2">
            </div>
            <div class="config-item">
              <label>Complex (patterns):</label>
              <input type="number" step="0.05" id="floor_complex" value="1.5">
            </div>
          </div>
        </div>

        <button class="btn-save" onclick="saveConfig('flooring')">ğŸ’¾ Save Flooring Config</button>
        <div class="status-message" id="flooring-status"></div>
      </div>

      <div class="sub-content" id="painting">
        <h2 class="section-title">Painting Configuration</h2>
        
        <div class="config-grid">
          <div class="config-card">
            <h3>ğŸ¨ Interior Rates (per sqft)</h3>
            <div class="config-item">
              <label>Walls (1 coat):</label>
              <input type="number" step="0.1" id="paint_int_walls_1" value="1.5">
            </div>
            <div class="config-item">
              <label>Walls (2 coats):</label>
              <input type="number" step="0.1" id="paint_int_walls_2" value="2.5">
            </div>
            <div class="config-item">
              <label>Ceiling:</label>
              <input type="number" step="0.1" id="paint_int_ceiling" value="2.0">
            </div>
            <div class="config-item">
              <label>Trim (per linear ft):</label>
              <input type="number" step="0.1" id="paint_int_trim" value="1.75">
            </div>
            <div class="config-item">
              <label>Door (per door):</label>
              <input type="number" step="5" id="paint_int_door" value="75">
            </div>
            <div class="config-item">
              <label>Cabinet (per linear ft):</label>
              <input type="number" step="1" id="paint_int_cabinet" value="35">
            </div>
          </div>

          <div class="config-card">
            <h3>ğŸ  Exterior Rates (per sqft)</h3>
            <div class="config-item">
              <label>Siding (1 coat):</label>
              <input type="number" step="0.1" id="paint_ext_siding_1" value="2.0">
            </div>
            <div class="config-item">
              <label>Siding (2 coats):</label>
              <input type="number" step="0.1" id="paint_ext_siding_2" value="3.5">
            </div>
            <div class="config-item">
              <label>Trim (per linear ft):</label>
              <input type="number" step="0.1" id="paint_ext_trim" value="2.5">
            </div>
            <div class="config-item">
              <label>Deck (per sqft):</label>
              <input type="number" step="0.1" id="paint_ext_deck" value="2.25">
            </div>
            <div class="config-item">
              <label>Fence (per linear ft):</label>
              <input type="number" step="0.1" id="paint_ext_fence" value="3.0">
            </div>
          </div>

          <div class="config-card">
            <h3>ğŸ”§ Prep & Specialty</h3>
            <div class="config-item">
              <label>Prep/Sanding (per sqft):</label>
              <input type="number" step="0.1" id="paint_prep" value="1.0">
            </div>
            <div class="config-item">
              <label>Primer (per sqft):</label>
              <input type="number" step="0.1" id="paint_primer" value="0.75">
            </div>
            <div class="config-item">
              <label>Wallpaper Removal (per sqft):</label>
              <input type="number" step="0.1" id="paint_wallpaper" value="1.5">
            </div>
            <div class="config-item">
              <label>Texture Repair (per sqft):</label>
              <input type="number" step="0.5" id="paint_texture" value="3.0">
            </div>
          </div>

          <div class="config-card">
            <h3>âš™ï¸ Complexity Multipliers</h3>
            <div class="config-item">
              <label>Standard:</label>
              <input type="number" step="0.05" id="paint_standard" value="1.0">
            </div>
            <div class="config-item">
              <label>Moderate (high ceilings):</label>
              <input type="number" step="0.05" id="paint_moderate" value="1.25">
            </div>
            <div class="config-item">
              <label>Complex (2+ story ext):</label>
              <input type="number" step="0.05" id="paint_complex" value="1.5">
            </div>
          </div>
        </div>

        <button class="btn-save" onclick="saveConfig('painting')">ğŸ’¾ Save Painting Config</button>
        <div class="status-message" id="painting-status"></div>
      </div>

      <div class="sub-content" id="drywall">
  <h2 class="section-title">Drywall Configuration</h2>
  
  <div class="config-grid">
    <div class="config-card">
      <h3>ğŸ“ Material Costs</h3>
      <div class="config-item">
        <label>Drywall Sheet (4x8):</label>
        <input type="number" step="1" id="drywall_sheet" value="15">
      </div>
      <div class="config-item">
        <label>Joint Compound (per sqft):</label>
        <input type="number" step="0.05" id="drywall_compound" value="0.35">
      </div>
      <div class="config-item">
        <label>Tape (per sqft):</label>
        <input type="number" step="0.05" id="drywall_tape" value="0.15">
      </div>
      <div class="config-item">
        <label>Screws (per sheet):</label>
        <input type="number" step="0.1" id="drywall_screws" value="0.50">
      </div>
    </div>

    <div class="config-card">
      <h3>ğŸ‘· Labor Rates (per sqft)</h3>
      <div class="config-item">
        <label>Hanging Rate:</label>
        <input type="number" step="0.01" id="drywall_hang_rate" value="0.02">
      </div>
      <div class="config-item">
        <label>Taping/Mudding Rate:</label>
        <input type="number" step="0.01" id="drywall_tape_rate" value="0.03">
      </div>
      <div class="config-item">
        <label>Texture Rate:</label>
        <input type="number" step="0.01" id="drywall_texture_rate" value="0.015">
      </div>
      <div class="config-item">
        <label>Hourly Labor Cost:</label>
        <input type="number" step="1" id="drywall_hourly" value="45">
      </div>
    </div>

    <div class="config-card">
      <h3>ğŸ”§ Complexity Multipliers</h3>
      <div class="config-item">
        <label>Standard Install:</label>
        <input type="number" step="0.05" id="drywall_standard" value="1.0">
      </div>
      <div class="config-item">
        <label>High Ceiling (10ft+):</label>
        <input type="number" step="0.05" id="drywall_high_ceiling" value="1.2">
      </div>
      <div class="config-item">
        <label>Smooth Finish (Level 5):</label>
        <input type="number" step="0.05" id="drywall_smooth" value="1.3">
      </div>
      <div class="config-item">
        <label>Textured Finish:</label>
        <input type="number" step="0.05" id="drywall_textured" value="1.15">
      </div>
    </div>

    <div class="config-card">
      <h3>ğŸ› ï¸ Additional Costs</h3>
      <div class="config-item">
        <label>Repair Patch (minor):</label>
        <input type="number" step="10" id="drywall_repair_minor" value="75">
      </div>
      <div class="config-item">
        <label>Repair Patch (moderate):</label>
        <input type="number" step="10" id="drywall_repair_moderate" value="200">
      </div>
      <div class="config-item">
        <label>Repair Patch (extensive):</label>
        <input type="number" step="10" id="drywall_repair_extensive" value="500">
      </div>
    </div>
  </div>

  <button class="btn-save" onclick="saveConfig('drywall')">ğŸ’¾ Save Drywall Config</button>
  <div class="status-message" id="drywall-status"></div>
</div>


<div class="sub-content" id="siding">
  <h2 class="section-title">Siding Configuration</h2>
  
  <div class="config-grid">
    <div class="config-card">
      <h3>ğŸ  Material Costs (per sqft)</h3>
      <div class="config-item">
        <label>Vinyl Siding:</label>
        <input type="number" step="0.5" id="siding_vinyl" value="4.50">
      </div>
      <div class="config-item">
        <label>Fiber Cement:</label>
        <input type="number" step="0.5" id="siding_fiber_cement" value="8.00">
      </div>
      <div class="config-item">
        <label>Wood Cedar:</label>
        <input type="number" step="0.5" id="siding_wood" value="12.00">
      </div>
      <div class="config-item">
        <label>Metal/Aluminum:</label>
        <input type="number" step="0.5" id="siding_metal" value="6.50">
      </div>
      <div class="config-item">
        <label>Stucco:</label>
        <input type="number" step="0.5" id="siding_stucco" value="9.00">
      </div>
    </div>

    <div class="config-card">
      <h3>ğŸ‘· Labor Rates (per sqft)</h3>
      <div class="config-item">
        <label>Vinyl Installation:</label>
        <input type="number" step="0.5" id="siding_vinyl_labor" value="3.00">
      </div>
      <div class="config-item">
        <label>Fiber Cement Installation:</label>
        <input type="number" step="0.5" id="siding_fiber_labor" value="5.00">
      </div>
      <div class="config-item">
        <label>Wood Installation:</label>
        <input type="number" step="0.5" id="siding_wood_labor" value="6.00">
      </div>
      <div class="config-item">
        <label>Metal Installation:</label>
        <input type="number" step="0.5" id="siding_metal_labor" value="4.00">
      </div>
      <div class="config-item">
        <label>Stucco Installation:</label>
        <input type="number" step="0.5" id="siding_stucco_labor" value="7.00">
      </div>
    </div>

    <div class="config-card">
      <h3>ğŸ—ï¸ Story Multipliers</h3>
      <div class="config-item">
        <label>1 Story:</label>
        <input type="number" step="0.05" id="siding_1_story" value="1.0">
      </div>
      <div class="config-item">
        <label>2 Story:</label>
        <input type="number" step="0.05" id="siding_2_story" value="1.2">
      </div>
      <div class="config-item">
        <label>3+ Story:</label>
        <input type="number" step="0.05" id="siding_3_story" value="1.5">
      </div>
    </div>

    <div class="config-card">
      <h3>ğŸ’µ Additional Costs</h3>
      <div class="config-item">
        <label>Old Siding Removal (per sqft):</label>
        <input type="number" step="0.25" id="siding_removal" value="1.50">
      </div>
      <div class="config-item">
        <label>House Wrap (per sqft):</label>
        <input type="number" step="0.1" id="siding_wrap" value="0.75">
      </div>
      <div class="config-item">
        <label>Trim (per linear ft):</label>
        <input type="number" step="0.5" id="siding_trim" value="4.00">
      </div>
      <div class="config-item">
        <label>Window Trim (per window):</label>
        <input type="number" step="5" id="siding_window_trim" value="50">
      </div>
    </div>
  </div>

  <button class="btn-save" onclick="saveConfig('siding')">ğŸ’¾ Save Siding Config</button>
  <div class="status-message" id="siding-status"></div>
</div>

      <div class="sub-content" id="regional">
        <h2 class="section-title">Regional Cost Multipliers</h2>
        
        <div class="info-box">
          <p><strong>â„¹ï¸ Regional multipliers apply to ALL trades in that state/market.</strong></p>
          <p>Based on BLS data + local market conditions. Adjust based on your actual costs.</p>
        </div>
        
        <div class="config-grid">
          <div class="config-card">
            <h3>ğŸ”´ High-Cost Markets</h3>
            <div class="config-item">
              <label>California:</label>
              <input type="number" step="0.05" id="region_CA" value="1.35">
            </div>
            <div class="config-item">
              <label>New York:</label>
              <input type="number" step="0.05" id="region_NY" value="1.30">
            </div>
            <div class="config-item">
              <label>Massachusetts:</label>
              <input type="number" step="0.05" id="region_MA" value="1.25">
            </div>
            <div class="config-item">
              <label>Hawaii:</label>
              <input type="number" step="0.05" id="region_HI" value="1.40">
            </div>
          </div>

          <div class="config-card">
            <h3>ğŸŸ¡ Medium-Cost Markets</h3>
            <div class="config-item">
              <label>Washington:</label>
              <input type="number" step="0.05" id="region_WA" value="1.15">
            </div>
            <div class="config-item">
              <label>Oregon:</label>
              <input type="number" step="0.05" id="region_OR" value="1.10">
            </div>
            <div class="config-item">
              <label>Colorado:</label>
              <input type="number" step="0.05" id="region_CO" value="1.10">
            </div>
            <div class="config-item">
              <label>Illinois:</label>
              <input type="number" step="0.05" id="region_IL" value="1.08">
            </div>
            <div class="config-item">
              <label>Virginia:</label>
              <input type="number" step="0.05" id="region_VA" value="1.05">
            </div>
          </div>

          <div class="config-card">
            <h3>ğŸŸ¢ Low-Cost Markets</h3>
            <div class="config-item">
              <label>Texas:</label>
              <input type="number" step="0.05" id="region_TX" value="0.95">
            </div>
            <div class="config-item">
              <label>Florida:</label>
              <input type="number" step="0.05" id="region_FL" value="0.95">
            </div>
            <div class="config-item">
              <label>Georgia:</label>
              <input type="number" step="0.05" id="region_GA" value="0.90">
            </div>
            <div class="config-item">
              <label>Ohio:</label>
              <input type="number" step="0.05" id="region_OH" value="0.92">
            </div>
            <div class="config-item">
              <label>Tennessee:</label>
              <input type="number" step="0.05" id="region_TN" value="0.88">
            </div>
            <div class="config-item">
              <label>Alabama:</label>
              <input type="number" step="0.05" id="region_AL" value="0.85">
            </div>
          </div>

          <div class="config-card">
            <h3>âš™ï¸ Default/National</h3>
            <div class="config-item">
              <label>National Average:</label>
              <input type="number" step="0.05" id="region_default" value="1.00">
            </div>
          </div>
        </div>

        <button class="btn-save" onclick="saveConfig('regional')">ğŸ’¾ Save Regional Config</button>
        <div class="status-message" id="regional-status"></div>
      </div>

    </div>

    <div class="main-content" id="estimate-tracker">
  <h2 class="section-title">ğŸ“Š Estimate Tracker</h2>
  
  <div class="config-card" style="max-width: 800px; margin-bottom: 30px;">
    <h3>ğŸ“… Google Calendar Integration</h3>
    
    <div id="calendarStatusBox">
      <div id="notConnected" style="display: none;">
        <p style="margin-bottom: 15px; color: #666;">
          Connect your Google Calendar to automatically block out busy dates for customer scheduling.
        </p>
        <button class="btn-save" onclick="connectGoogleCalendar()" style="margin-top: 0;">
          ğŸ”— Connect Google Calendar
        </button>
      </div>

      <div id="connected" style="display: none;">
        <p style="color: #28a745; margin-bottom: 10px;">
          âœ… <span id="connectedEmail"></span>
        </p>
        <p style="font-size: 12px; color: #666; margin-bottom: 10px;">
          Last synced: <span id="lastSync">Never</span>
        </p>
        <button class="btn-save" onclick="syncCalendar()" style="margin-right: 10px;">
          ğŸ”„ Sync Now
        </button>
        <button class="btn-cancel" onclick="disconnectCalendar()">
          âŒ Disconnect
        </button>
      </div>
    </div>
    
    <div class="status-message" id="calendar-status"></div>
  </div>
  
  <!-- ESTIMATE LIST AND DETAILS -->
  <div class="config-card" style="max-width: 100%; padding: 0;">
    <div style="display: grid; grid-template-columns: 350px 1fr; min-height: 600px;">
      
      <!-- LEFT SIDEBAR: ESTIMATE QUEUE -->
      <div style="border-right: 1px solid #e0e0e0; padding: 20px; background: #f8f9fa;">
        <h3 style="margin: 0 0 20px 0; font-size: 18px; color: #333;">ğŸ“‹ Estimates Queue</h3>
        
        <div id="estimatesList" style="display: flex; flex-direction: column; gap: 12px;">
          <!-- Estimates will load here -->
          <div style="text-align: center; padding: 40px 20px; color: #999;">
            <p>Loading estimates...</p>
          </div>
        </div>
      </div>
      
      <!-- RIGHT PANEL: ESTIMATE DETAILS -->
      <div id="estimateDetails" style="padding: 30px; background: white;">
        <div style="text-align: center; padding: 80px 40px; color: #999;">
          <p style="font-size: 18px; margin-bottom: 10px;">ğŸ‘ˆ Select an estimate</p>
          <p style="font-size: 14px;">Click any estimate from the queue to view details</p>
        </div>
      </div>
      
    </div>
  </div>
</div>

<script>
// ESTIMATE TRACKER FUNCTIONALITY
const RAILWAY_API = 'https://roofbid-backend-production.up.railway.app';
let currentEstimate = null;

// Load estimates on page load
async function loadEstimates() {
  const container = document.getElementById('estimatesList');
  
  try {
    const response = await fetch(`${RAILWAY_API}/api/estimates`);
    
    if (!response.ok) {
      throw new Error(`API returned ${response.status}`);
    }
    
    const estimates = await response.json();
    
    if (!estimates || estimates.length === 0) {
      container.innerHTML = `
        <div style="text-align: center; padding: 40px 20px; color: #999;">
          <p>No estimates yet</p>
          <p style="font-size: 12px; margin-top: 10px;">Estimates will appear here when customers submit quote requests</p>
        </div>
      `;
      return;
    }
    
    // Render estimate cards
    container.innerHTML = estimates.map(est => `
      <div class="estimate-card" onclick="viewEstimateDetails('${est.id}')" style="
        background: white;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        padding: 15px;
        cursor: pointer;
        transition: all 0.2s;
      " onmouseover="this.style.borderColor='#667eea'" onmouseout="this.style.borderColor='#e0e0e0'">
        
        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 10px;">
          <div>
            <div style="font-weight: 600; font-size: 16px; color: #333; margin-bottom: 4px;">
              ${est.customerName || 'Unknown Customer'}
            </div>
            <div style="font-size: 12px; color: #999;">
              ${est.customerEmail || ''}
            </div>
          </div>
          <span style="
            background: ${getTradeColor(est.trade)};
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
          ">${est.trade || 'General'}</span>
        </div>
        
        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 12px; padding-top: 12px; border-top: 1px solid #f0f0f0;">
          <div style="font-size: 20px; font-weight: 700; color: #667eea;">
            $${parseFloat(est.totalCost || 0).toLocaleString('en-US', {minimumFractionDigits: 2})}
          </div>
          <div style="font-size: 11px; color: #999;">
            ${new Date(est.createdAt).toLocaleDateString()}
          </div>
        </div>
        
      </div>
    `).join('');
    
  } catch (error) {
    console.error('Error loading estimates:', error);
    container.innerHTML = `
      <div style="text-align: center; padding: 40px 20px; color: #dc3545;">
        <p style="font-weight: 600; margin-bottom: 10px;">âš ï¸ Connection Error</p>
        <p style="font-size: 12px;">Unable to load estimates. Railway backend may be down.</p>
        <button onclick="loadEstimates()" style="
          margin-top: 15px;
          padding: 8px 16px;
          background: #667eea;
          color: white;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          font-size: 12px;
        ">ğŸ”„ Retry</button>
      </div>
    `;
  }
}

// Get color based on trade type
function getTradeColor(trade) {
  const colors = {
    'roofing': '#dc3545',
    'hvac': '#007bff',
    'electrical': '#ffc107',
    'plumbing': '#17a2b8',
    'flooring': '#6c757d',
    'painting': '#28a745',
    'drywall': '#fd7e14',
    'siding': '#6f42c1'
  };
  return colors[trade?.toLowerCase()] || '#667eea';
}

// View estimate details
async function viewEstimateDetails(estimateId) {
  const detailsPanel = document.getElementById('estimateDetails');
  
  try {
    const response = await fetch(`${RAILWAY_API}/api/estimates/${estimateId}`);
    const estimate = await response.json();
    currentEstimate = estimate;
    
    detailsPanel.innerHTML = `
      <div style="max-width: 700px;">
        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 30px;">
          <div>
            <h2 style="margin: 0 0 10px 0; color: #333;">${estimate.customerName}</h2>
            <p style="color: #666; margin: 0;">${estimate.customerEmail} â€¢ ${estimate.customerPhone || 'No phone'}</p>
          </div>
          <span style="
            background: ${getTradeColor(estimate.trade)};
            color: white;
            padding: 8px 16px;
            border-radius: 6px;
            font-weight: 600;
            text-transform: uppercase;
          ">${estimate.trade}</span>
        </div>
        
        <div style="background: #f8f9fa; border-radius: 8px; padding: 20px; margin-bottom: 25px;">
          <h3 style="margin: 0 0 15px 0; font-size: 16px; color: #333;">ğŸ“ Project Address</h3>
          <p style="margin: 0; color: #666; line-height: 1.6;">
            ${estimate.address || 'No address provided'}<br>
            ${estimate.city ? estimate.city + ', ' : ''}${estimate.state || ''} ${estimate.zipCode || ''}
          </p>
        </div>
        
        <div style="background: #f8f9fa; border-radius: 8px; padding: 20px; margin-bottom: 25px;">
          <h3 style="margin: 0 0 15px 0; font-size: 16px; color: #333;">ğŸ’° Estimate Breakdown</h3>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
            <div>
              <div style="font-size: 12px; color: #999; margin-bottom: 4px;">Materials</div>
              <div style="font-size: 20px; font-weight: 600; color: #333;">
                $${parseFloat(estimate.materialsCost || 0).toLocaleString('en-US', {minimumFractionDigits: 2})}
              </div>
            </div>
            <div>
              <div style="font-size: 12px; color: #999; margin-bottom: 4px;">Labor</div>
              <div style="font-size: 20px; font-weight: 600; color: #333;">
                $${parseFloat(estimate.laborCost || 0).toLocaleString('en-US', {minimumFractionDigits: 2})}
              </div>
            </div>
          </div>
          <div style="border-top: 2px solid #dee2e6; margin-top: 15px; padding-top: 15px;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
              <div style="font-size: 14px; font-weight: 600; color: #666;">TOTAL</div>
              <div style="font-size: 28px; font-weight: 700; color: #667eea;">
                $${parseFloat(estimate.totalCost || 0).toLocaleString('en-US', {minimumFractionDigits: 2})}
              </div>
            </div>
          </div>
        </div>
        
        ${estimate.trade === 'roofing' ? `
          <button id="generateMaterialListBtn" onclick="generateMaterialList('${estimate.id}')" style="
            width: 100%;
            background: #667eea;
            color: white;
            padding: 16px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
          " onmouseover="this.style.background='#5568d3'" onmouseout="this.style.background='#667eea'">
            ğŸ“‹ Generate Material List
          </button>
        ` : `
          <div style="text-align: center; padding: 20px; background: #fff3cd; border-radius: 8px; color: #856404;">
            ğŸ“‹ Material list generation currently available for roofing estimates only
          </div>
        `}
        
        <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #e0e0e0; font-size: 12px; color: #999;">
          Created: ${new Date(estimate.createdAt).toLocaleString()}
        </div>
      </div>
    `;
    
  } catch (error) {
    console.error('Error loading estimate details:', error);
    detailsPanel.innerHTML = `
      <div style="text-align: center; padding: 80px 40px; color: #dc3545;">
        <p style="font-size: 18px; margin-bottom: 10px;">âš ï¸ Error Loading Details</p>
        <p style="font-size: 14px;">Unable to fetch estimate information</p>
      </div>
    `;
  }
}

// Initialize on tab switch
document.addEventListener('DOMContentLoaded', function() {
  // Load estimates when Estimate Tracker tab is clicked
  const estimateTrackerBtn = document.querySelector('[onclick="showSection(\'estimate-tracker\')"]');
  if (estimateTrackerBtn) {
    estimateTrackerBtn.addEventListener('click', loadEstimates);
  }
});
</script>

    <div class="main-content" id="company-profile">
      <div class="placeholder-content">
        <h2>ğŸ¢ Company Profile</h2>
        <p>Edit company name, logo, contact info, license numbers</p>
        <p style="margin-top: 20px; color: #667eea; font-weight: 600;">Coming Soon</p>
      </div>
    </div>

    <div class="main-content" id="contracts">
      <div class="placeholder-content">
        <h2>ğŸ“„ Contract Templates</h2>
        <p>Customize contract language, terms, payment schedules</p>
        <p style="margin-top: 20px; color: #667eea; font-weight: 600;">Coming Soon</p>
      </div>
    </div>

  </div>
</div>

<script>
const API_BASE = 'https://roofbid-backend-production.up.railway.app';

document.querySelectorAll('.main-tab').forEach(tab => {
  tab.addEventListener('click', function() {
    document.querySelectorAll('.main-tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.main-content').forEach(c => c.classList.remove('active'));
    
    this.classList.add('active');
    document.getElementById(this.dataset.main).classList.add('active');
  });
});

document.querySelectorAll('.sub-tab').forEach(tab => {
  tab.addEventListener('click', function() {
    document.querySelectorAll('.sub-tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.sub-content').forEach(c => c.classList.remove('active'));
    
    this.classList.add('active');
    document.getElementById(this.dataset.sub).classList.add('active');
    
    loadConfig(this.dataset.sub);
  });
});

window.addEventListener('load', function() {
  loadConfig('roofing');
  loadConfig('regional');
  checkCalendarStatus();
});

function loadConfig(section) {
  fetch(`${API_BASE}/api/config/${section}`)
    .then(res => res.json())
    .then(data => {
      if (data.success && data.config) {
        Object.keys(data.config).forEach(key => {
          const input = document.getElementById(key);
          if (input) input.value = data.config[key];
        });
      }
    })
    .catch(err => console.error('Load error:', err));
}

function saveConfig(section) {
  const inputs = document.querySelectorAll(`#${section} input`);
  const config = {};
  
  inputs.forEach(input => {
    const value = parseFloat(input.value);
    if (!isNaN(value)) {
      config[input.id] = value;
    }
  });
  
  const statusDiv = document.getElementById(`${section}-status`);
  statusDiv.textContent = 'â³ Saving...';
  statusDiv.className = 'status-message';
  statusDiv.style.display = 'block';
  
  fetch(`${API_BASE}/api/config/${section}`, {
    method: 'PUT',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ config })
  })
  .then(res => res.json())
  .then(data => {
    if (data.success) {
      statusDiv.textContent = 'âœ… Configuration saved successfully!';
      statusDiv.className = 'status-message success';
      setTimeout(() => { statusDiv.style.display = 'none'; }, 3000);
    } else {
      throw new Error(data.error || 'Save failed');
    }
  })
  .catch(err => {
    statusDiv.textContent = 'âŒ Error: ' + err.message;
    statusDiv.className = 'status-message error';
  });
}

function getContractorId() {
  return localStorage.getItem('contractor_id') || '1';
}

async function connectGoogleCalendar() {
  try {
    const contractorId = getContractorId();
    const res = await fetch(`${API_BASE}/api/google/auth-url?contractor_id=${contractorId}`);
    const data = await res.json();
    
    const popup = window.open(data.auth_url, 'google-auth', 'width=500,height=600');
    
    const timer = setInterval(() => {
      if (popup.closed) {
        clearInterval(timer);
        checkCalendarStatus();
      }
    }, 500);
  } catch (err) {
    alert('Error connecting to Google: ' + err.message);
  }
}

async function syncCalendar() {
  try {
    const contractorId = getContractorId();
    const res = await fetch(`${API_BASE}/api/google/sync`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ contractor_id: contractorId })
    });
    const data = await res.json();
    alert('Synced! Blocked ' + (data.blocked_dates ? data.blocked_dates.length : 0) + ' dates');
    checkCalendarStatus();
  } catch (err) {
    alert('Sync failed: ' + err.message);
  }
}

async function disconnectCalendar() {
  if (!confirm('Disconnect Google Calendar?')) return;
  
  try {
    const contractorId = getContractorId();
    await fetch(`${API_BASE}/api/google/disconnect`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ contractor_id: contractorId })
    });
    checkCalendarStatus();
  } catch (err) {
    alert('Disconnect failed: ' + err.message);
  }
}

async function checkCalendarStatus() {
  try {
    const contractorId = getContractorId();
    const res = await fetch(`${API_BASE}/api/google/status?contractor_id=${contractorId}`);
    const data = await res.json();
    
    if (data.connected) {
      document.getElementById('notConnected').style.display = 'none';
      document.getElementById('connected').style.display = 'block';
      document.getElementById('connectedEmail').textContent = data.email;
      document.getElementById('lastSync').textContent = data.last_sync || 'Never';
    } else {
      document.getElementById('notConnected').style.display = 'block';
      document.getElementById('connected').style.display = 'none';
    }
  } catch (err) {
    document.getElementById('notConnected').style.display = 'block';
    document.getElementById('connected').style.display = 'none';
  }
}

<!-- InstaBid Material Calculator Scripts -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="https://cdn.jsdelivr.net/gh/SiteHypeInc/instabid2@main/frontend/calculator.js"></script>
<script src="https://cdn.jsdelivr.net/gh/SiteHypeInc/instabid2@main/frontend/material-matcher.js"></script>
<script src="https://cdn.jsdelivr.net/gh/SiteHypeInc/instabid2@main/frontend/material-list.js"></script>

<script>
// MAIN TAB SWITCHING
document.querySelectorAll('.main-tab').forEach(button => {
  button.addEventListener('click', function() {
    const targetSection = this.getAttribute('data-main');
    
    // Remove active class from all main tabs
    document.querySelectorAll('.main-tab').forEach(btn => btn.classList.remove('active'));
    
    // Add active class to clicked tab
    this.classList.add('active');
    
    // Hide all main content sections
    document.querySelectorAll('.main-content').forEach(content => content.classList.remove('active'));
    
    // Show target section
    document.getElementById(targetSection).classList.add('active');
    
    // If switching to estimate tracker, load estimates
    if (targetSection === 'estimate-tracker') {
      loadEstimates();
    }
  });
});

// SUB TAB SWITCHING (for Price Adjustments)
document.querySelectorAll('.sub-tab').forEach(button => {
  button.addEventListener('click', function() {
    const targetSection = this.getAttribute('data-sub');
    
    // Remove active class from all sub tabs
    document.querySelectorAll('.sub-tab').forEach(btn => btn.classList.remove('active'));
    
    // Add active class to clicked tab
    this.classList.add('active');
    
    // Hide all sub content sections
    document.querySelectorAll('.sub-content').forEach(content => content.classList.remove('active'));
    
    // Show target section
    document.getElementById(targetSection).classList.add('active');
  });
});
</script>


</body>
</html>